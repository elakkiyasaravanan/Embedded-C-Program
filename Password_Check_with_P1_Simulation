#include <REGX51.H>
#include <string.h>

void UART_Init() {
    TMOD |= 0x20;
    TH1 = 0xFD;
    SCON = 0x50;
    TR1 = 1;
}

void UART_Tx(char ch) {
    SBUF = ch;
    while (TI == 0);
    TI = 0;
}

void UART_Print(char* str) {
    while (*str) {
        UART_Tx(*str++);
    }
}

void main() {
    char password[5] = "1234";
    char input[5];
    int i;

    UART_Init();
    P1 = 0xFF; // Set Port1 as input

    UART_Print("Enter 4-digit password (P1.0-P1.3):\n");

    while (1) {
        for (i = 0; i < 4; i++) {
            while (P1_0 == 1); // Wait for press
            input[i] = '1';    // Simulate as '1'
            while (P1_0 == 0); // Wait for release
        }
        input[4] = '\0';

        if (strcmp(input, password) == 0) {
            UART_Print("Access Granted\n");
        } else {
            UART_Print("Access Denied\n");
        }

        while (1);
    }
}
